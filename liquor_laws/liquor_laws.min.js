var config={"map_location":"gist.githubusercontent.com/d3noob/5189284/raw/7c4bbf3f44d2aeb4d01ca6365b7978b09fdc8766/world-110m2.json","reviews_location":"gist.githubusercontent.com/becausealice2/663243e3982136e391d53fb4150fecb1/raw/4cb35987a8a2a113ddd7809479850a4d88c5870f/restaurant_reviews.csv","reviews_latitude_column":"latitude","reviews_longitude_column":"longitude","div_id":"reviews_location_map","div_width":960,"div_height":500,"margin_top":0,"margin_bottom":0,"margin_left":0,"margin_right":0,"map_scale":130,"map_shift_horizontal":2,"map_shift_vertical":1.5,"country_fill_color":"#ccc","country_border_color":"#fff","country_border_width":0.5,"location_marker_radius":3,"location_marker_color":"blue",};var topology="",reviews="",width=0,height=0,svg=null,projection=null,path=null;function set_vars(config){topology="https://"+config.map_location;reviews="https://"+config.reviews_location;width=parseInt(config.div_width)-parseInt(config.margin_left)-parseInt(config.margin_right);height=parseInt(config.div_height)-parseInt(config.margin_top)-parseInt(config.margin_bottom);svg=d3.select("#"+config.div_id).append("svg").attr("width",width).attr("height",height).append('g').attr('class','reviews_location_map');projection=d3.geoMercator().scale(config.map_scale).translate([width/(parseFloat(config.map_shift_horizontal)),height/(parseFloat(config.map_shift_vertical))]);path=d3.geoPath().projection(projection);render(config,topology,reviews)}
function render(config,topology,reviews){d3.json(topology,function render_map(topology){var geojson=topojson.feature(topology,topology.objects.countries);svg.append("g").attr("class","reviews_map_countries").selectAll("path").data(geojson.features).enter().append("path").attr("d",path).style("fill",config.country_fill_color).style("stroke",config.counter_border_color).style("stroke-width",parseFloat(config.country_border_width)+"px");d3.csv(reviews,function render_review_location(reviews){var lon=config.reviews_longitude_column,lat=config.reviews_latitude_column;svg.selectAll("circle").data(reviews).enter().append("circle").attr("cx",function(d){return projection([d[lon],d[lat]])[0]}).attr("cy",function(d){return projection([d[lon],d[lat]])[1]}).attr("r",config.location_marker_radius).style("fill",config.location_marker_color)})})}
set_vars(config);