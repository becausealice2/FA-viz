function create_config(t){lines=t.toString().toLowerCase().split("\n"),lines.forEach(function(t){t=t.split(":");var e=t[0].trim(),r=t[1].trim();config[e]=r}),set_vars(config)}function set_vars(t){topology="https://"+t.map_location,reviews="https://"+t.reviews_location,width=parseInt(t.div_width)-parseInt(t.margin_left)-parseInt(t.margin_right),height=parseInt(t.div_height)-parseInt(t.margin_top)-parseInt(t.margin_bottom),svg=d3.select("#"+t.div_id).append("svg").attr("width",width).attr("height",height).append("g").attr("class","reviews_location_map"),projection=d3.geoMercator().scale(t.map_scale).translate([width/parseFloat(t.map_shift_horizontal),height/parseFloat(t.map_shift_vertical)]),path=d3.geoPath().projection(projection),render(t,topology,reviews)}function render(t,e,r){d3.json(e,function(e){var o=topojson.feature(e,e.objects.countries);svg.append("g").attr("class","reviews_map_countries").selectAll("path").data(o.features).enter().append("path").attr("d",path).style("fill",t.country_fill_color).style("stroke",t.counter_border_color).style("stroke-width",parseFloat(t.country_border_width)+"px"),d3.csv(r,function(e){var r=t.reviews_longitude_column,o=t.reviews_latitude_column;svg.selectAll("circle").data(e).enter().append("circle").attr("cx",function(t){return projection([t[r],t[o]])[0]}).attr("cy",function(t){return projection([t[r],t[o]])[1]}).attr("r",t.location_marker_radius).style("fill",t.location_marker_color)})})}var config_txt="config.txt",config={},topology="",reviews="",width=0,height=0,svg=null,projection=null,path=null;d3.text(config_txt,create_config);